import{L as i}from"./localbase-Dun8nI1D.js";import{f as v,g as m,h as u}from"./index-DmT5nx1Y.js";function R(){let r;const n=v([]),e=m({nome:"",responsavelKey:"",dataReserva:"",horaInicio:"",horaFim:""}),s=async()=>{if(r)try{const[a,l]=await Promise.all([r.collection("reservas").get(),r.collection("professores").get({keys:!0})]),t=l.reduce((o,c)=>(o[c.key]=c.data.nome,o),{});console.log(t),n.value=a.map(o=>({...o,responsavelNome:t[o.responsavelKey]||"Professor NÃ£o Encontrado"}))}catch(a){console.error("Erro ao buscar e mapear reservas:",a)}};return u(()=>{r=new i("dbReserv"),s()}),{form:e,reservarSala:async()=>{if(!r)return!1;try{return console.log(e),await r.collection("reservas").add({nomeSala:e.nome,responsavelKey:e.responsavelKey,dataReserva:e.dataReserva,horaInicio:e.horaInicio,horaFim:e.horaFim,dataCriacao:new Date().toISOString()}),e.nome="",e.responsavelKey="",e.dataReserva="",e.horaInicio="",e.horaFim="",await s(),!0}catch(a){return console.error("ERRO FATAL AO SALVAR NO DB:",a),!1}},reservas:n,capturarReservas:s}}export{R as u};
